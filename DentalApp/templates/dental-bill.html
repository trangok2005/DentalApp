{%extends 'layout/base.html'%}
{%block title%}Hoa Don{%endblock%}

{%block content%}

<div class="container mt-5 mb-5">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="card shadow-sm p-4 bg-white">

                <h3 class="text-center mb-4 text-secondary">Hóa đơn</h3>

                <form>
                    <div class="mb-3">
                        <label for="selectPhieuDieuTri" class="form-label">Phiếu điều trị</label>
                        <select class="form-select" id="selectPhieuDieuTri" onchange="autoFillData()">
                            <option value="" selected disabled>Chọn phiếu điều trị</option>
                            {% for r in records %}
                            <option value="{{r.MaPDT}}">
                                [PDT-{{ r.MaPDT }}] {{ r.benhnhan.HoTen }} ({{ r.NgayLap.strftime('%d/%m/%Y') }})
                            </option>
                            {% endfor %}

                            <!--                            <option value="PDT001">PDT-001 (Nguyễn Văn A - 16/12/2025)</option>-->
                            <!--                            <option value="PDT002">PDT-002 (Trần Thị B - 16/12/2025)</option>-->
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Họ tên bệnh nhân</label>
                        <input type="text" class="form-control" id="tenBenhNhan" readonly>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Tiền khám</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="tienKham" readonly>
                            <span class="input-group-text bg-light text-muted">VNĐ</span>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Tiền thuốc</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="tienThuoc" readonly>
                            <span class="input-group-text bg-light text-muted">VNĐ</span>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Thuế VAT (10%)</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="thueVAT" readonly>
                            <span class="input-group-text bg-light text-muted">VNĐ</span>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Tổng tiền</label>
                        <div class="input-group">
                            <input type="text" class="form-control fw-bold fs-5 text-primary" id="tongTien" readonly>
                            <span class="input-group-text bg-light text-muted">VNĐ</span>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label d-block">Hình thức thanh toán</label>
                        <div class="d-flex gap-4">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="paymentMethod" id="cash" checked>
                                <label class="form-check-label" for="cash">
                                    Trực tiếp
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="paymentMethod" id="banking">
                                <label class="form-check-label" for="banking">
                                    Chuyển khoản
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label for="ghiChu" class="form-label">Ghi chú</label>
                        <textarea class="form-control" id="ghiChu" rows="4"></textarea>
                    </div>

                    <div class="d-grid">
                        <button type="button" onclick="submitDentalBill()" class="btn btn-primary btn-block">Tạo hóa
                            đơn
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

{%endblock%}

{% block scripts %}
<script src="{{ url_for('static', filename='js/dental-bill.js') }}"></script>
{% endblock %}